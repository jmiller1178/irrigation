{% load static %}
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="refresh" content="15">
<title> Sprinkle Smart</title>
<link href="{% static 'style.css' %}" rel="stylesheet" type="text/css">
</head>
<body>
    <div id="header">
      <div id="search" ><form action="" method="get"></form></div>
      <div id="navigation">
          <ul>
              <li><a href="/">Home</a></li>
              <li><a href="/manually_schedule/">Schedule</a></li>
              <li><a href="/admin/">Admin</a></li>
              <li><a href="/m">Mobile</a></li>
          </ul>
      </div>
    </div>
    <div id="main_image"></div>
    <div id="content">
      <table width="790" border="1" cellspacing="0" cellpadding="0">
      <tr>
        <td colspan="2">
        <h1>Welcome to Sprinkle Smart</h1>
        <div id="image"><img src="{% static 'images/image_11.jpg' %}" alt="image1" width="123" height="123"></div> <p>Information about Sprinkle Smart goes here.<br> <br>
        Some more text goes here. <br><br>
        Closing comments go here.</p><br>
        <br><br>
        </td>
      </tr>
      <tr>
        <td valign="top"><div id="todays_schedule">Current Weather</div>
          <table cellspacing="0" cellpadding="0">
          {% if current_weather %}
          <tr>
            <td>As of {{ current_weather.conditionDateTime }} {{ current_weather.conditionCode.description }} and {{ current_weather.temperature }}&deg;</td>
          </tr>
          <tr>
            {% if current_weather.conditionCode.IsRaining %}
              <td>It is raining outside</td>
            {% else %}
              <td>It is not raining outside</td>
            {% endif %}
          </tr>
          {% endif %}

          </table>
        </td>
        <td valign="top"><div id="todays_schedule">Status</div>
          <table cellspacing="0" cellpadding="0">
            <tr>
              {% if system_enabled.systemState == True %}
                <td align="left"><img src="{% static 'images/greenlight.jpg' %}" alt="ON" width=19 height=19 /> System Enabled</td>
              {% else %}
                <td align="left"><img src="{% static 'images/redlight.jpg' %}" alt="OFF" width=15 height=15 /> System Disabled!</td>
              {% endif %}
            </tr>

            <tr>
              
              {% if daemon_status == "ON" %}
                <td align="left"><img src="{% static 'images/greenlight.jpg' %}" alt="ON" width=19 height=19 /> Controller Running</td>
              {% else %}
                <td align="left"><img src="{% static 'images/redlight.jpg' %}" alt="OFF" width=15 height=15 /> Controller Stopped!</td>
              {% endif %}
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td width="500" valign="top"><div id="todays_schedule">Today's Schedule</div>
          <table cellspacing="0" cellpadding="0">
            
            {% if todays_requests %}
              <tr><a href="/rpi_gpio_request_cancel_all" ><img src="{% static 'images/cancel_button.jpg' %}" alt="cancel all" /></a></tr>
              <tr>
                <th align="left">Zone</th>
                <th>ON</th>
                <th>OFF</th>
                <th width="60px">Duration</th>
                <th width="70px">Remaining</th>
                <th>&nbsp;</th>
              </tr>
              {% for request in todays_requests %}
                <tr>
                  <td align="left"><a href="/zone_control/{{ request.rpiGpio.zone.zoneId }}" >{{ request.rpiGpio.zone.displayName }}</a></td>
                  <td>{{ request.onTime }}</td>
                  <td>{{ request.offTime }}</td>
                  <td>{{ request.duration }}</td>
                  <td>{{ request.remaining }}</td>
                  {% if request.status.statusId == 1 %}
                    <td><a href="/rpi_gpio_request_cancel/{{ request.id }}" ><img src="{% static 'images/cancel_button.jpg' %}" alt="cancel" /></a></td>
                  {% else %}
                    <td>&nbsp;</td>
                  {% endif %}  
              </tr>
              {% endfor %}
            {% else %}
              <tr><td>Nothing scheduled for today</td></tr>
            {% endif %}
          </table>
        </td>
        <td><div id="zone_status" valign="top">Zone Status</div>
          <table cellspacing="0" cellpadding="0">
            {% if zone_list %}
              {% for zone in zone_list %}
                <tr>
                  <td><a href="/zone_control/{{ zone.zoneId }}" >{{ zone.displayName }}</a></td>
                  {% if zone.currentState == "ON" %}
                    <td align="center"><img src="{% static 'images/greenlight.jpg' %}" alt="ON" width=19 height=19 /></td>
                  {% else %}
                    <td align="center"><img src="{% static 'images/redlight.jpg' %}" alt="OFF" width=15 height=15 /></td>
                  {% endif %}
                </tr>
              {% endfor %}
            {% else %}
              <tr><td>No Zone Info Available</td></tr>
            {% endif %}
          </table>
        </td>
      </tr>
      </table>
    </div>
</body>

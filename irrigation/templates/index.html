{% load static compress sass_tags %}
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <!-- <meta http-equiv="refresh" content="15"> -->
  <title> Sprinkle Smart</title>
  <!--<link href="{% static 'style.css' %}" rel="stylesheet" type="text/css">-->
  {% compress css %}

  <link type="text/x-scss" href="{% sass_src "sass/main.scss" %}" rel="stylesheet" />
  
  {% endcompress %}

  <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet">

  <link rel="stylesheet" href="{% static 'css/icon-font.css' %}">
  <link rel="shortcut icon" type="image/png" href="img/favicon.png">
  <script  src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous">
   </script>
  <script src="{% static "js/utility.js" %}"></script>
  <script src="{% static "js/irrigation.js" %}"></script>
</head>
<body>
  <div class="navigation">
    <input type="checkbox" class="navigation__checkbox" id="navi-toggle">

    <label for="navi-toggle" class="navigation__button">
        <span class="navigation__icon">&nbsp;</span>
    </label>

    <div class="navigation__background">&nbsp;</div>

    <nav class="navigation__nav">
        <ul class="navigation__list">
            <li class="navigation__item"><a href="/" class="navigation__link">Home</a></li>
            <li class="navigation__item"><a href="/manually_schedule/" class="navigation__link">Schedule</a></li>
            <li class="navigation__item"><a href="/admin/" class="navigation__link">Admin</a></li>
            <li class="navigation__item"><a href="/m" class="navigation__link">Mobile</a></li>
            </ul>
    </nav>
  </div>

  <header class="header">
      <div class="header__text-box">
          <h1 class="heading-primary">
              <span class="heading-primary--main">Sprinklesmart</span>
          </h1>
          <div class="row">
              <div class="col-1-of-2">
                {% if system_enabled == True %}
                  <span class="btn btn--green btn-toggle-zone" data-zone-id="21">System Enabled</span>
                {% else %}
                  <span class="btn btn--red btn-toggle-zone" data-zone-id="21">System Disabled</span>
                {% endif %}
              </div>
              <div class="col-2-of-2">
                {% if twentyfour_vac_enabled == True %}
                  <span class="btn btn--green btn-toggle-zone" data-zone-id="22">24VAC Enabled</span>
                {% else %}
                  <span class="btn btn--red btn-toggle-zone" data-zone-id="22">24VAC Disabled</span>
                {% endif %}
              </div>
          </div>
          <div class="row weather-conditions">
            <h3 class="heading-tertiary u-margin-bottom-small">Current Weather Conditions</h3> 
            <p class="paragraph temperature">
              As of {{ current_weather.conditionDateTime }} {{ current_weather.conditionCode.description }} and {{ current_weather.temperature|floatformat:0 }}&deg; F
          </p>
          {% if current_weather %}
            <h3 class="heading-tertiary u-margin-bottom-small">
              {% if current_weather.conditionCode.IsRaining %}
                <p class="paragraph">It is raining outside</p>
              {% else %}
                <p class="paragraph">It is not raining outside</p>
              {% endif %}
            </h3>
          {% endif %}
          </div>
          <!---->

      </div>
  </header>
  <main>
    <section class="section-status">
      <div class="row">
        <div class="col-1-of-2">
          <table class="table table-condensed table-bordered">
            <thead>
                <tr>
                    <th>Zone</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Duration</th>
                    <th>Remaining</th>
                    <th>&nbsp;</th>
                </tr>
            </thead>
            <tbody>
                {% for request in todays_requests %}
                  <tr>    
                      <td><a href="/zone_control/{{ request.rpiGpio.zone.zoneId }}" >{{ request.rpiGpio.zone.displayName }}</a></td>
                      <td>{{ request.onTime }}</td>
                      <td>{{ request.offTime }}</td>
                      <td>{{ request.duration }}</td>
                      <td>{{ request.remaining }}</td>
                      <td>
                        {% if request.rpiGpio.zone.is_on == True %}
                          <a href="/rpi_gpio_request_cancel/{{ request.id }}" ><img src="{% static 'img/cancel_button.jpg' %}" alt="cancel" /></a>
                        {% else %}
                          &nbsp;
                        {% endif %}  
                      </td>
                  </tr>
                {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="col-2-of-2">
          <table class="table table-condensed table-bordered">
            <thead>
                <tr>
                    <th>Zone</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
              {% for zone in zone_list %}
                  <tr>    
                      <td><a href="/zone_control/{{ zone.zoneId }}" >{{ zone.displayName }}</a></td>
                      <td>
                        {% if zone.currentState == "ON" %}
                          <img src="{% static 'img/greenlight.jpg' %}" alt="ON" width=19 height=19 />
                        {% else %}
                          <img src="{% static 'img/redlight.jpg' %}" alt="OFF" width=15 height=15 />
                        {% endif %}
                      </td>
                  </tr>
                {% endfor %}
            </tbody>
          </table>
        </div>
      </div>  
    </section>

    
  </main>
</body>

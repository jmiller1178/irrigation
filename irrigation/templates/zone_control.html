{% load static %}
<head>
<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" name="viewport" />
<meta http-equiv="refresh" content="15">
<title> Sprinkle Smart</title>
<link href="{% static 'style.css' %}" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="header">
    <div id="search" ></div>
        <div id="navigation">
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/manually_schedule/">Schedule</a></li>
                <li><a href="/admin/">Admin</a></li>
                <li><a href="/m">Mobile</a></li>
            </ul>
        </div>
    </div>
    <div id="main_image"></div>
	{% include "mobile/mobile_zone_control.html" %}
    
    <div id="content">
        <div id="zone_title">{{ zone.displayName }}</div>
        <form action="/zone_toggle/{{ zone.zoneId }}/" method="post">
		<form action="/zone_toggle/{{ zone.zoneId }}/" method="post">
          {% csrf_token %}
          {% if zone.currentState == "OFF" %}
            <div id="duration_title"><label for="duration">Minutes:&nbsp;</label><input type="number" name="duration" id="duration" min="1" max="90" value="15"></div>  
            <a href="#" class="off_button_big" onclick="document.forms[0].submit(); return false;">Turn ON</a><br>
          {% else %}
            <a href="#" class="on_button_big" onclick="document.forms[0].submit(); return false;" >Turn OFF</a><br>

            {% if active_request %}
              {% for request in active_request %}
                {% if request.rpiGpio.zone.zoneId == zone.zoneId %}
                  ON: {{ request.onTime }}<br>
                  OFF: {{ request.offTime }}<br>
                  Duration: {{ request.duration }} mins<br>
                  Remaining: {{ request.remaining }} mins<br>
                {% endif %}
              {% endfor %}
            {% endif %}
          {% endif %}
        </form> 
    </div>
</body>

